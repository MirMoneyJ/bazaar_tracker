<!DOCTYPE html>
<html>
<head>
  <title>My Craftable Items</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Craftable Item Details</h1>  
    <label for="item-name-input">Enter Item Name:</label>
    <input type="text" id="item-name-input" onkeyup="sendData(this)" placeholder="e.g. Wooden Sword">
    <section id = "searchResults">

    <script> 
      function sendData(e) {
        const searchResults = document.getElementById('searchResults');
        let match = e.value.match(/^[a-zA-Z ]*/);
        let match2 = e.value.match(/\s*/);
        if(match2[0] === e.value) {
          searchResults.innerHTML = '';
          return;
        }
        if(match[0] === e.value) {
          fetch('getItem', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({payload: e.value})
        }).then(res => res.json()).then(data => {
          let payload = data.payload;
          console.log(payload);
          searchResults.innerHTML = '';
          if(payload.length < 1) {
            searchResults.innerHTML = `<p>Sorry. Nothing Found.</p>`;
            return;
          }
          payload.forEach((item, index) => {
            if(index > 0) searchResults.innerHTML += '<hr>';
            searchResults.innerHTML += `<p>${item.name}</p>`;
          });
        });
        return;
        }
        searchResults.innerHTML = '';
      }
    </script>
    </section>
</body>
</html>
